1.Context-Free grammar
[S,] -> [q0,z0,q]
[q0,z0,q] -> a[q1,a,p][p,a,q][q,z0,r]
[q1,a,q1] -> a
[q1,z0,qf] -> e

2.Replace p,q by {q1,q2,q3..qf}
[S,] -> [q0,z0,q1]
[S,] -> [q0,z0,qf]
[S,] -> [q0,z0,q0]
[q0,z0,q1] -> a[q1,a,q1][q1,a,q1][q1,z0,q1]
[q0,z0,q1] -> a[q1,a,q1][q1,a,q1][q1,z0,qf]
[q0,z0,q1] -> a[q1,a,q1][q1,a,q1][q1,z0,q0]
[q0,z0,qf] -> a[q1,a,q1][q1,a,qf][qf,z0,q1]
[q0,z0,qf] -> a[q1,a,q1][q1,a,qf][qf,z0,qf]
[q0,z0,qf] -> a[q1,a,q1][q1,a,qf][qf,z0,q0]
[q0,z0,q0] -> a[q1,a,q1][q1,a,q0][q0,z0,q1]
[q0,z0,q0] -> a[q1,a,q1][q1,a,q0][q0,z0,qf]
[q0,z0,q0] -> a[q1,a,q1][q1,a,q0][q0,z0,q0]
[q0,z0,q1] -> a[q1,a,qf][qf,a,q1][q1,z0,q1]
[q0,z0,q1] -> a[q1,a,qf][qf,a,q1][q1,z0,qf]
[q0,z0,q1] -> a[q1,a,qf][qf,a,q1][q1,z0,q0]
[q0,z0,qf] -> a[q1,a,qf][qf,a,qf][qf,z0,q1]
[q0,z0,qf] -> a[q1,a,qf][qf,a,qf][qf,z0,qf]
[q0,z0,qf] -> a[q1,a,qf][qf,a,qf][qf,z0,q0]
[q0,z0,q0] -> a[q1,a,qf][qf,a,q0][q0,z0,q1]
[q0,z0,q0] -> a[q1,a,qf][qf,a,q0][q0,z0,qf]
[q0,z0,q0] -> a[q1,a,qf][qf,a,q0][q0,z0,q0]
[q0,z0,q1] -> a[q1,a,q0][q0,a,q1][q1,z0,q1]
[q0,z0,q1] -> a[q1,a,q0][q0,a,q1][q1,z0,qf]
[q0,z0,q1] -> a[q1,a,q0][q0,a,q1][q1,z0,q0]
[q0,z0,qf] -> a[q1,a,q0][q0,a,qf][qf,z0,q1]
[q0,z0,qf] -> a[q1,a,q0][q0,a,qf][qf,z0,qf]
[q0,z0,qf] -> a[q1,a,q0][q0,a,qf][qf,z0,q0]
[q0,z0,q0] -> a[q1,a,q0][q0,a,q0][q0,z0,q1]
[q0,z0,q0] -> a[q1,a,q0][q0,a,q0][q0,z0,qf]
[q0,z0,q0] -> a[q1,a,q0][q0,a,q0][q0,z0,q0]
[q1,a,q1] -> a
[q1,z0,qf] -> e

3.Remove useless nonterminal
[S,] -> [q0,z0,q1]
[q0,z0,q1] -> a[q1,a,q1][q1,a,q1][q1,z0,qf]
[q1,a,q1] -> a
[q1,z0,qf] -> e
